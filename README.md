# 启动与登录说明

## 前端项目启动命令

1. 安装依赖：

```bash
npm install || yarn install
```

2. 启动开发环境：

```bash
npm start || yarn start
```

3. 构建生产包：

```bash
npm run build || yarn build
```

## 默认账号密码

- 账号：`admin@example.com`
- 密码：`Admin@123456`

- 账号：`test@example.com`
- 密码：`Test@123456`

登录后如需选择或创建 Workspace，请根据页面提示操作。

### 权限设计

| 分类 | 说明 | 权限范围 |
|-----|------|---------|
| Community | 社区 | 所有用户可见的内容 |
| Workspace | 工作区 | 特定工作区内的用户可见 |
| Personal | 个人 | 仅个人可见的内容 |


### 菜单栏
| 区域 | 功能组件 | 具体内容 | 状态/可变性 | 新增功能描述 |
|-----|---------|---------|------------|------------|
| Logo区域 | Logo图标 | • 闪电图标（ThunderboltOutlined）<br>• 背景色为浅灰色<br>• 圆角设计 | 固定不变 | - |
| | Logo文字 | • 主标题："可信"<br>• 副标题：域名 "syntrusthub.agentour.app" | 固定不变 | - |
| 工作区区域 | 工作区信息 | • 工作区头像（显示首字母）<br>• 工作区名称<br>• 下拉箭头图标 | 可点击展开 | • 点击下拉箭头显示 Popover<br>• Popover 中显示工作区详细信息<br>• 包含工作区的基本信息、成员、设置等 |
| | 搜索功能 (待讨论)| • 全局搜索按钮<br>• 点击打开搜索面板 | 全局搜索 | • 搜索范围：所有权限下的卡片<br>• 不受 filter/group/sort 影响<br>• 支持快速搜索和结果预览 |
| 菜单栏区域 | 问题菜单（待讨论） | • 一级菜单项<br>• 子菜单项 | 可点击导航 | • 一级菜单可点击跳转对应页面<br>• 子菜单项保持原有展开/收起功能 |
| | 菜单操作 | • 子菜单项可添加新项目（+图标）<br>• 普通菜单项显示更多操作（...图标）<br>• 支持菜单项展开/收起动画 | 操作按钮状态可切换 | - |
| | 菜单图标 | • 支持多种图标类型<br>• 包括：搜索、文件、应用等图标 | 图标类型固定 | - |
| 个人信息区域 | 用户信息 | • 用户头像（显示首字母）<br>• 用户名称<br>• 用户邮箱 | 可点击展开 | • 点击更多按钮显示 Popover<br>• Popover 中显示用户详细信息<br>• 包含个人信息、设置、退出登录等选项 |
| | 操作按钮 | • 更多操作按钮（...图标） | 按钮状态可切换 | • 点击显示个人信息 Popover |



### 探索页面 (ExplorePage)

| 功能类别 | 具体功能 | 功能描述 |
|---------|---------|---------|
| 页面导航 | 工具栏 | • 筛选按钮（显示筛选数量）<br>• 分组按钮（显示分组数量）<br>• 排序按钮 |
| 数据加载 | 无限滚动 | • 每页加载10条数据<br>• 自动加载更多<br>• 加载状态显示<br>• 错误状态处理 |
| 卡片基础信息 | 标题区域 | • 可点击跳转到详情页<br>• 分支爬升按钮（创建任务，保存后跳转对应详情页） |
| | 作者信息 | • 作者头像<br>• 作者名称<br>• 来源信息<br>• 标签展示 |
| | 问题概要 | • 问题描述文本展示 |
| 数据指标 | 关键指标 | • 可信度（Credibility）百分比<br>• 可信度变化趋势（正负值）<br>• 得分（Score）<br>• 得分变化趋势（正负值） |
| 数据可视化 | 雷达图 | • 可切换显示/隐藏<br>• 多代理数据对比<br>• 选择功能（Overall/Agent1/Agent2）<br>• 维度得分展示 |
| | 折线图 | • 置信度爬升升曲线<br>• 时间轴展示<br>• 数据点标记<br>• 数据提示（Tooltip）<br>• 响应式适配 |
| 交互功能 | 卡片操作 | • 标题点击跳转<br>• 分支爬升任务创建<br>• 维度得分展开/收起 |
| | 数据筛选 | • 代理数据选择<br>• 数据对比功能 |
| 更新信息 | 状态展示 | • 最后更新时间<br>• 更新者信息（头像和名称） |



### 任务页面 (TaskPage)
| 功能类别 | 具体功能 | 功能描述 |
|---------|---------|---------|
| 页面导航 | 任务分类 | • 根据权限范围（社区/工作区/个人）自动筛选任务<br>• 根据用户选择的导航项展示不同的任务数据 |
| 工具栏功能 | 筛选功能 | • 筛选按钮（显示筛选数量）<br>• 可设置筛选条件 |
| | 分组功能 | • 分组按钮（显示分组数量）<br>• 可设置分组条件 |
| | 排序功能 | • 排序按钮<br>• 可设置排序规则 |
| 任务卡片 | 基础信息 | • 任务标题（可点击跳转详情）<br>• 作者信息（头像、名称）<br>• 来源信息<br>• 标签展示 |
| | 任务详情 | • 任务状态显示<br>• 任务目标描述<br>• 任务操作按钮 |
| | 任务操作 | • 场景管理<br>• 添加QA<br>• 添加模板 |
| 数据可视化 | 置信度曲线 | • 折线图展示<br>• 时间轴显示<br>• 数据点标记<br>• 网格背景 |
| | 维度得分 | • 雷达图展示<br>• 多维度数据对比<br>• 支持多个代理数据<br>• 可选择显示不同代理 |
| 状态管理 | 加载状态 | • 加载中提示<br>• 加载失败提示<br>• 空数据提示 |
| | 数据更新 | • 显示更新时间<br>• 显示更新者信息 |
| 交互功能 | 图表切换 | • 置信度曲线/维度得分切换<br>• 图表展开/收起 |
| | 选择 | • Overall/Agent1/Agent2 选择<br>• 实时更新图表显示 |
| 响应式设计 | 布局适配 | • 适配不同屏幕尺寸<br>• 图表自适应大小<br>• 聊天区域联动 |


### 卡片详情页面 (CardDetailPage)
| 功能类别 | 具体功能 | 功能描述 |
|---------|---------|---------|
| 页面导航 | 面包屑导航 | • 显示当前路径<br>• 提供返回上一级功能<br>• 点击父级路径可返回对应页面 |
| 卡片基础信息 | 标题区域 | • 显示卡片标题<br>• 收藏/分享功能<br>• 标签展示 |
| | 作者信息 | • 作者头像<br>• 作者名称<br>• 来源信息 |
| | 问题详情 | • 问题描述文本展示<br>• 评论功能 |
| 模型选择 | 模型面板 | • 支持多模型展示<br>• 可展开/收起模型详细信息<br>• 展示模型标签和使用情况 |
| | 模型选择 | • 多选功能<br>• 全选/取消全选<br>• 可选择不同模型进行对比 |
| 数据可视化 | 折线图 | • 多模型数据对比展示<br>• 时间轴显示<br>• 响应式设计<br>• 渐变色填充效果<br>• 数据提示(Tooltip) |
| | 雷达图 | • 多维度数据展示<br>• 多模型数据对比<br>• 综合得分和可信度得分展示<br>• 响应式设计 |
| 历史记录 | 更新历史 | • 显示更新时间<br>• 更新者信息<br>• 历史内容展示 |
| 注释功能 | 注释列表 | • 列出所有注释<br>• 显示注释者头像和名称<br>• 注释时间和内容展示 |
| 优化模式 | 模式切换 | • 普通模式/优化模式切换<br>• 步骤化优化流程<br>• 优化进度展示 |
| | 步骤导航 | • 多步骤优化过程<br>• 结果质询/QA优化/场景优化/模板优化/再次测试/提交结果 |
| 优化内容 | QA优化 | • QA内容编辑<br>• 注释功能<br>• 保存和提交 |
| | 场景优化 | • 场景内容编辑<br>• 注释功能<br>• 保存和提交 |
| | 模板优化 | • 模板内容编辑<br>• 注释功能<br>• 保存和提交 |
| | 测试确认 | • 测试进度展示<br>• 测试结果展示<br>• 进度条动画 |
| | 提交结果 | • 结果摘要<br>• 提交确认<br>• 完成表单 |
| 底部按钮 | 操作按钮组 | • 点赞功能<br>• 评论功能<br>• 分支爬升<br>• 设置功能<br>• 返回功能<br>• 终止功能<br>• 发送功能 |
| | 优化模式开关 | • 切换优化模式<br>• 显示当前模式状态 |


### 核心组件
| 组件名称 | 文件路径 | 功能描述 |
|---------|----------|----------|
| ModelPanel | components/card/ModelPanel.js | • 显示模型基本信息<br>• 支持展开/收起<br>• 展示模型详细信息和评估内容 |
| LineChartSection | components/card/LineChartSection.js | • 显示置信度曲线<br>• 支持多模型数据对比<br>• 自定义图表样式和交互 |
| RadarChartSection | components/card/RadarChartSection.js | • 显示多维度评分雷达图<br>• 支持多模型数据对比<br>• 展示综合得分和可信度得分 |
| CardHeader | components/card/CardHeader.js | • 显示卡片标题和导航信息<br>• 提供返回、收藏、分享功能<br>• 显示标签和作者信息 |
| FooterActions | components/card/FooterActions.js | • 提供底部操作按钮组<br>• 支持模式切换<br>• 根据不同状态显示不同按钮 |
| HistorySection | components/card/HistorySection.js | • 显示更新历史记录<br>• 展示更新时间和更新者<br>• 展示历史内容 |
| CommentsList | components/common/CommentsList.js | • 展示注释列表<br>• 显示注释者信息和时间<br>• 格式化注释内容 |
| ActionButton | components/common/ActionButton.js | • 提供统一样式的操作按钮<br>• 支持不同类型和状态<br>• 可自定义图标和内容 |
| FilterSystem | components/filter/FilterSystem.js | • 提供筛选、分组和排序功能<br>• 支持自定义筛选条件<br>• 保存筛选状态 |


### 自定义钩子(Hooks)
| Hook名称 | 文件路径 | 功能描述 |
|---------|----------|----------|
| useTestProgress | hooks/useTestProgress.js | • 管理测试进度状态<br>• 提供进度条动画控制<br>• 支持测试完成回调 |
| useChartData | hooks/useChartData.js | • 处理图表数据转换<br>• 生成雷达图和折线图数据<br>• 支持多模型数据格式化 |
| useModelData | hooks/useModelData.js | • 提供模型相关工具方法<br>• 获取模型颜色映射<br>• 管理模型选择状态 |


### 样式管理
| 样式文件 | 路径 | 功能描述 |
|---------|-----|----------|
| Charts.js | styles/components/card/Charts.js | • 提供图表相关样式<br>• 支持雷达图和折线图样式<br>• 图例和指标样式定义 |
| ModelPanel.js | styles/components/card/ModelPanel.js | • 提供模型面板样式<br>• 支持展开/收起状态样式<br>• 模型信息展示样式 |
| ActionButton.js | styles/components/common/ActionButton.js | • 提供按钮统一样式<br>• 支持不同类型按钮样式<br>• 按钮状态样式定义 |

### 项目架构
项目采用组件化、模块化的架构设计，主要分为以下几个部分：

1. **页面层(Pages)**：
   - ExplorePage: 浏览和发现卡片
   - TaskPage: 管理和处理任务
   - CardDetailPage: 查看卡片详情和进行优化

2. **组件层(Components)**：
   - 卡片组件: 负责卡片信息的展示和交互
   - 图表组件: 负责数据可视化展示
   - 通用组件: 提供跨页面通用功能

3. **服务层(Services)**：
   - cardService: 处理卡片相关的数据请求
   - taskService: 处理任务相关的数据请求

4. **上下文层(Contexts)**：
   - ChatContext: 管理聊天相关状态
   - NavContext: 管理导航相关状态

5. **样式管理**：
   - 采用antd-style的CSS-in-JS方案
   - 组件样式模块化
   - 全局样式统一管理

6. **工具层(Utils/Hooks)**：
   - 自定义hooks: 提取和复用业务逻辑
   - 工具函数: 提供通用功能方法

### 数据流向
1. 用户进入应用 → 根据导航选择不同页面
2. 页面加载 → 调用对应service获取数据
3. 数据处理 → 使用自定义hooks进行数据转换
4. 数据展示 → 通过组件渲染UI
5. 用户交互 → 触发状态更新 → 重新渲染UI

### 项目优化方向
1. **性能优化**:
   - 组件拆分和懒加载
   - 减少重复渲染
   - 数据缓存策略

2. **代码质量**:
   - 统一的代码风格和注释
   - 类型检查和错误处理
   - 单元测试覆盖

3. **用户体验**:
   - 响应式设计完善
   - 交互动效优化
   - 错误状态友好提示

### 个人信息pop

1. 点击头像/用户信息区域：

| 功能类别 | 功能项 | 功能描述 | 状态/标记 |
|---------|--------|----------|-----------|
| 用户基本信息 | 头像和用户名 | • 显示用户头像<br>• 显示用户名：Jackson | - |
| | 邮箱信息 | • 显示用户邮箱：Jcson@yahoo.com | - |
| 账户功能 | 个人版本 | • 显示当前版本状态<br>• "立即升级"按钮 | 可升级 |
| | 个人信息 | • 个人资料管理<br>• "完善信息得奖励"标签 | 有奖励 |
| | 获取免费token | • Token获取功能<br>• 标记为"HOT"<br>• 右侧有导航箭头 | HOT |
| 界面设置 | 深色模式 | • 切换深色/浅色主题<br>• 显示当前模式状态 | 可切换 |
| | 设置 | • 进入系统设置页面<br>• 包含系统相关配置 | - |
| 支持与帮助 | 帮助文档 | • 访问系统帮助文档<br>• 用户指南和教程 | - |
| | 客服中心 | • 联系客服支持<br>• 问题反馈通道 | - |
| 退出 | Log out | • 退出登录功能<br>• 显示快捷键提示 "⌘⇧Q" | 有快捷键 |

2. 点击切换按钮（...）：

| 功能类别 | 功能项 | 功能描述 |
|---------|--------|----------|
| 工作区切换 | 当前工作区 | • 显示当前所在工作区<br>• 高亮显示当前选中的工作区 |
| | 可用工作区列表 | • 列出用户有权限的所有工作区<br>• 每个工作区显示：<br> - 工作区名称<br> - 工作区图标/头像<br> - 用户在该工作区的角色？ |
| | 切换功能 | • 点击工作区即可切换<br>• 切换时可能需要重新加载相关数据 |
| | 工作区管理 | • 可能包含创建新工作区的选项<br>• 工作区设置入口 |
